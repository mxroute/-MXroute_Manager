var build_progress_bar=function(el){var percent_el=YAHOO.util.Dom.getElementsByClassName("cpanel_widget_progress_bar_percent","div",el);for(var i in percent_el){if(percent_el.hasOwnProperty(i)){var elt=percent_el[i];if("innerHTML"in elt){var percent=YAHOO.lang.trim(elt.innerHTML);if(CPANEL.validate.positive_integer(percent)){CPANEL.widgets.progress_bar(el,percent,"",'{"inverse_colors":"true"}')}}}}};var build_progress_bars=function(root_el){YAHOO.util.Dom.getElementsByClassName("stats_progress_bar","div",root_el,build_progress_bar)};var destroy_progress_bars=function(root_el){YAHOO.util.Dom.getElementsByClassName("cpanel_widget_progress_bar","div",root_el,function(el){YAHOO.util.Dom.get(el).innerHTML=""})};var fetch_extended_stats=function(){YAHOO.util.Dom.setStyle("toggle_extended_stats","display","none");YAHOO.util.Dom.setStyle("extended_stats_loading_icon","display","block");YAHOO.util.Dom.get("extended_stats_loading_icon").innerHTML=CPANEL.icons.ajax+" loading...";var callback={success:function(o){YAHOO.util.Dom.get("extended_stats").innerHTML=o.responseText;build_progress_bars("stats_extended");expand_extended_stats()},failure:function(o){YAHOO.util.Dom.get("extended_stats_loading_icon").innerHTML="";YAHOO.util.Dom.setStyle("toggle_extended_stats","display","block");YAHOO.util.Dom.get("toggle_extended_stats").innerHTML="AJAX Failure: click to try again"},timeout:3e3};YAHOO.util.Connect.asyncRequest("GET","home/retro/extended_statsbar.html?secpolicy_ui=no",callback,null)};var finish_expand_extended_stats=function(){if(YAHOO.env.ua.ie>5&&YAHOO.env.ua.ie<8){build_progress_bars("stats_extended")}YAHOO.util.Dom.get("toggle_extended_stats").innerHTML="Collapse Stats";YAHOO.util.Dom.setStyle("toggle_extended_stats","display","");YAHOO.util.Dom.setStyle("extended_stats_loading_icon","display","none");YAHOO.util.Dom.replaceClass("toggle_extended_stats_img","box-expand-control","box-collapse-control");YAHOO.util.Dom.setStyle("extended_stats","height","100%");YAHOO.util.Dom.get("extended_stats_state").innerHTML="shown"};var expand_extended_stats=function(){YAHOO.util.Dom.get("extended_stats_state").innerHTML="animating";YAHOO.util.Dom.get("toggle_extended_stats").innerHTML="";var auto_height=CPANEL.animate.getAutoHeight("extended_stats");YAHOO.util.Dom.setStyle("extended_stats","height","0px");YAHOO.util.Dom.setStyle("extended_stats","display","block");var attributes={height:{to:auto_height,units:"px"}};var anim=new YAHOO.util.Anim("extended_stats",attributes,"0.5",YAHOO.util.Easing.easeOutStrong);anim.onComplete.subscribe(finish_expand_extended_stats);anim.animate()};var finish_hide_extended_stats=function(){YAHOO.util.Dom.get("toggle_extended_stats").innerHTML="Expand Stats";YAHOO.util.Dom.replaceClass("toggle_extended_stats_img","box-collapse-control","box-expand-control");YAHOO.util.Dom.get("extended_stats_state").innerHTML="hidden"};var hide_extended_stats=function(){if(YAHOO.env.ua.ie>5&&YAHOO.env.ua.ie<8){destroy_progress_bars("extended_stats")}YAHOO.util.Dom.get("extended_stats_state").innerHTML="animating";YAHOO.util.Dom.get("toggle_extended_stats").innerHTML="";var attributes={height:{to:"0",units:"px"}};var anim=new YAHOO.util.Anim("extended_stats",attributes,"0.5",YAHOO.util.Easing.easeOutStrong);anim.onComplete.subscribe(finish_hide_extended_stats);anim.animate()};var toggle_extended_stats=function(){YAHOO.util.Dom.get("toggle_extended_stats").blur();var state=YAHOO.util.Dom.get("extended_stats_state").innerHTML;state=YAHOO.lang.trim(state);if(state=="hidden"){if(YAHOO.lang.trim(YAHOO.util.Dom.get("extended_stats").innerHTML)==""){fetch_extended_stats()}else{expand_extended_stats()}SetNvData("xstatscollapsed","expanded")}else if(state=="shown"){hide_extended_stats();SetNvData("xstatscollapsed","collapsed")}};var init_extended_stats=function(){YAHOO.util.Event.on("toggle_extended_stats","click",function(e){YAHOO.util.Event.preventDefault(e)});YAHOO.util.Event.on(["toggle_extended_stats","stats-header"],"click",toggle_extended_stats);build_progress_bars("content-stats");register_interfacecfg_nvdata("xstatscollapsed");if(NVData["xstatscollapsed"]=="expanded"&&YAHOO.lang.trim(YAHOO.util.Dom.get("extended_stats").innerHTML)==""){fetch_extended_stats()}};